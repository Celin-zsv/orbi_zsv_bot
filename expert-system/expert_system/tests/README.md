![Pytest](https://img.shields.io/badge/Pytest-7.3-blue)
# ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏. –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤, –ø—Ä–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
    poetry run task tests
```
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç—á–µ—Ç–∞ –ø–æ –ø–æ–∫—Ä—ã—Ç–∏—é –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏:

```bash
    poetry run task tests_cov
```
–í –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–ª—É—á–∞–µ –≤ –ø–∞–ø–∫–µ `htmlcov` –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ html.
–¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ CI/CD –ø—Ä–æ–µ–∫—Ç–∞.

–¢–µ—Å—Ç—ã —Å–æ—Å—Ç–æ—è—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –º–æ–¥—É–ª–µ–π:

* `test_api.py` - —Ç–µ—Å—Ç—ã –¥–æ—Å—Ç—É–ø–∞ –∏ API
* `test_models.py` - —Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π
* `test_utils.py` - —Ç–µ—Å—Ç—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
* `test_auth.py` - —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## –¢–µ—Å—Ç—ã API

–¢–µ—Å—Ç—ã API –ø—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏
–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–¢–µ—Å—Ç—ã API –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö
—ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
–ù–∞–ø—Ä–∏–º–µ—Ä,
```python
def test_create_button(self, user_client, button):
    """Test create button"""
```
–°–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç "–∫–Ω–æ–ø–∫–∞", –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ
–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–µ–π –æ–±—ä–µ–∫—Ç–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–î–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
–æ—Ç–¥–∞–≤–∞–µ–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—é –æ–±—ä–µ–∫—Ç–∞.

```python
for key, value in expected_fields.items():
    assert response.data['results'][0][key] == value, (
        f'–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è {key} –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç, –æ–∂–∏–¥–∞–ª–æ—Å—å {value}, '
        f'–ø–æ–ª—É—á–µ–Ω–æ {response.data["results"][0][key]}'
    )
```

## –¢–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π

–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ –ø–æ–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¢–ó.
–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–æ–¥–µ–ª–µ–π, –≥–¥–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

```python
@pytest.mark.django_db
def test_text_button_url_constraints(self, text_button_url):
    """TextButtonUrl constraints: can't create two buttons with the same text and button"""
    with pytest.raises(IntegrityError):
        TextButtonUrl.objects.create(text=text_button_url.text, button=text_button_url.button)
```
–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ verbose_names —É –ø–æ–ª–µ–π –∏ –Ω–∞–ª–∏—á–∏–µ __str__ –º–µ—Ç–æ–¥–æ–≤ —É –º–æ–¥–µ–ª–µ–π.

## –¢–µ—Å—Ç—ã –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∫–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ
–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –¢–µ—Å—Ç—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

## üî® TODO

* –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
